<!DOCTYPE html>
<html>
<head>
    <title>商品管理</title>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const loadProducts = () => {
                fetch('/backend/product_management.php', { method: 'GET' })
                    .then(response => response.json())
                    .then(products => {
                        const container = document.getElementById('products');
                        container.innerHTML = '';
                        products.forEach(product => {
                            const div = document.createElement('div');
                            div.textContent = `${product.name} - $${product.price}`;
                            container.appendChild(div);
                        });
                    });
            };

            loadProducts();

            // 添加商品
            document.getElementById('addProduct').onsubmit = (e) => {
                e.preventDefault();
                const name = document.getElementById('productName').value;
                const price = document.getElementById('productPrice').value;

                fetch('/backend/product_management.php', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                    body: `name=${name}&price=${price}`
                }).then(() => loadProducts());
            };
        });
    </script>
</head>
<body>
    <h1>商品管理</h1>
    <div id="products"></div>
    <form id="addProduct">
        <label for="productName">商品名称:</label>
        <input type="text" id="productName" required><br>
        <label for="productPrice">商品价格:</label>
        <input type="number" id="productPrice" step="0.01" required><br>
        <input type="submit" value="添加商品">
    </form>
</body>
</html>